---
authors:
  - name: null
---

# 3 Archiving Laser Scan Data

## 3.1  File Formats for Archiving Datasets

The decision to archive a scan project should ideally occur in the planning phase of a project. Planning to archive can help project organization by establishing a framework for processing documentation and for data structuring. By establishing a proper framework at the beginning of a project, the archival process becomes more streamlined and integrated into a project rather than a secondary product that is generated at the end.

As stated in Section 2.1.5, the minimum standard deliverables for archiving a terrestrial scan dataset in archaeology are the individual raw scans, the final registered point cloud and all associated metadata elements including project metadata, scan metadata and registration metadata.

For additional products generated beyond the registered point cloud, it is also *strongly advised* to archive the final product, the interim dataset used to create the product, all transformation matrices and metadata elements associated with all datasets. The interim dataset is considered to be very important because it provides the connection between the original registered point cloud and the derived product. For example, a mesh is rarely generated from the original registered point cloud. The point cloud is typically cleaned to remove erroneous data points, overlapping data is typically minimized or deleted and additional smoothing or subsampling may be performed. Therefore it is valuable to have the interim edited point cloud to understand how the mesh relates back to the original dataset. The interim dataset is important for assessing a product's validity and for understanding the processes used to create the final product and how these may/may not have deviated from the original dataset.

The recommended datasets and associated metadata for archiving are listed in the table below and discussed in the subsequent sections:

```{list-table} 
:header-rows: 1

* - Dataset Description
  - Preservation Format
  - Metadata
  - Required?
* - Original raw scan files
  - ASCII TXT and Native
  - Project Metadata, Scan Metadata
  - Yes
* - Registered point cloud <br/>*Transformation Matrices* for each scan <br/>Control Point File if georeferenced
  - ASCII TXT
  - Registration Metadata
  - Yes
* - Pre-mesh point cloud
  - ASCII TXT
  - Pre-Meshing Metadata
  - Strongly Advised if archiving a derived Polygonal mesh
* - Polygonal mesh
  - OBJ + MTL (ASCII)
  - Polygonal Mesh Metadata
  - Required if final dataset and strongly advised if used to create a derived 2D/3D CAD Dataset
* - Decimated Mesh
  - OBJ + MTL (ASCII)
  - Decimated Mesh Metadata
  - Required if final dataset
* - 2D CAD Dataset
  - DXF/DWG
  - 2D CAD Model Metadata
  - Required if final dataset
* - 3D CAD Dataset
  - DXF/DWG
  - 3D CAD Model Metadata
  - Required if final dataset
* - DEM
  - SDTS
  - DEM Creation Metadata
  - Required if final dataset
* - Video
  - Suitable MPG format
  - Video Creation Metadata
  - No
```

### 3.1.1 File types for archiving point clouds

There is currently no general purpose, open format for storing point cloud datasets generated by all types of laser scanners [@huber2011, 1].  The ASTM E57 format is promising particularly given the large number of vendors that are supporting it however the format is still in beta testing and is years away from complete implementation.  The LAS format currently used by the airborne LIDAR community is also a possible alternative however the LAS standard is limited in its application to terrestrial and object-level datasets.  Read more on both of these standards in the text below.  

Until there is a single open format to support all types of scan data, it is suggested to archive point cloud data sets in both an ASCII format and also the native proprietary format where applicable.   While the ASCII data format does not retain data organization and tends to generate large file sizes, this ensures easy human interpretation and is readable by virtually
all point cloud software.  All point cloud datasets including the original scan files and the registered point cloud should be archived in the ASCII format using the TXT file extension.  For spherical datasets and/or datasets where the ASCII file is an “edited and processed version” of the original, it is also suggested to archive scans in their original native format.  See section 3.1.1.a below to read more on when to archive scans as ASCII or both native and ASCII.

The ASTM E57 format is currently being developed to address the critical need to have an open standard, vendor neutral data format for the exchange and storage of 3D point clouds.  The format can store data produced by laser scanners as well as other systems including flash LIDAR systems, structured light scanners, stereo vision systems, and others [@huber2011, 2]. E57 also provides support for storing 2D images associated with a scan and all metadata associated with the 2D images and 3D data. In addition, the format supports organized "gridded" datasets which can be very valuable for long range spherical scans and can also support data in multiple coordinate systems.  The format is currently supported by a long list of vendors including Leica, Optech, Riegl, Trimble, Z+F and more.  To read more about the future development and implementation of the E57 format, please refer to the [ASTM website](https://www.astm.org/) and [libe57.org](http://www.libe57.org/). 

The LAS format was developed by ASPRS to store aerial LIDAR data and has recently gained more support in the terrestrial scanning community. While the format is not specific to terrestrial datasets, it does support point cloud organization and normal information which are important for storing original raw scan files.  The format however does not support registration information or other ancillary data such as 2D images.  Section 7.4.1 in the Metric Survey Specifications for Culture Heritage provides additional discussion of the LAS format.  For more information, please refer to the ASPRS website.

__When to use ASCII, native/proprietary, or both?__

All scans are required to be archived at a minimum in the ASCII txt format to ensure file accessibility and readability.  In addition, for datasets where it is beneficial to retain point cloud organization for example, mid/long range spherical datasets, it is advised to archive original raw scans in their native format.  For spherical scans, preserving normal information prior to scan registration is important particularly for potential meshing operations.   Also spherical data sets are often gridded when imported into processing software which involves re-interpolating the data. Therefore an ASCII version of a scan that is exported from the software can look considerably different than the original raw scan in its native format.  

For any dataset that has also been considerably edited or cleaned prior to importation/registration, it is advised to archive the scan in its original native format.  For example, phase scanners can produce significant amounts of noise that is typically filtered and removed in the processing software.  This filtering process can also potentially remove useful data.  Therefore, in this example, it would be advised to archive the original unedited dataset in the scan’s native format and to also archive the cleaned version of the scan used in registration in ASCII format.  For object level datasets that have been scanned directly into a processing software, typical scan editing will include removing non-object data or ancillary information from a scan.  In instances when scan data are transferred directly to the processing software, it can be difficult to extract the original scan in its native format.  In this case where scan editing has removed only non-object specific information and where the original dataset is difficult to extract, it would be deemed acceptable to archive scans in the ASCII format only.  

While it may not always be clear as to whether or not to archive a scan in both ASCII and native formats hopefully this discussion has provided some insight into possible scenarios.  The best rule of thumb to remember is if the ASCII version of a scan is considerably different than the original then its best to also archive the original native format.  When archiving both ASCII and native scans, the metadata should be completed for the native scan files. 

### 3.1.2 File types for archiving polygonal meshes

There are numerous 3D interchange formats used today. The OBJ format is a geometry definition file format was first developed by Wavefront Technologies. OBJ is a simple data format that represents 3D geometry, namely the position of each vertex, the UV position of each texture coordinate vertex, normals, and the faces that make each polygon defined as a list of vertices, and texture vertices. Additional files that can accompany an OBJ file include the material file (.MTL) and an image texture file (.JPG). OBJ files are the recommended data format for archiving polygonal mesh files. Alternative formats for archival submission include the X3D or DAE formats.

### 3.1.3 File types for archiving related products

As stated above, there are a host of different products that can be derived from point cloud data sets. Those discussed in this document include polygonal meshes (discussed above), 2D CAD models including plans, sections, and elevations, 3D CAD models, digital elevation models (DEMs) and movie files. For a discussion of archival CAD formats, please see the CAD data format section in the CAD Guide. Here it is recommended to archive both 2D and 3D CAD models using either the DXF or DWG formats developed by AutoDesk. In the GIS guide, it is recommended to archive DEMS in the USGS SDTS format or other available ArcView formats. Movie files or digital videos are recommended to be archived using the MPG format. For an additional discussion on digital video formats, please refer to the Digital Video guide.

## 3.2  Acquisitional Metadata 

Acquisitional metadata is divided into two levels, Project level metadata and Scan level metadata. Both project and scan level metadata should accompany the archival of the original scan datasets. The specifications provided by English Heritage [-@eh2007] are the basis for the metadata standards listed below. Additional specifications not listed in the English Heritage document are also suggested. 

The project level metadata is the information needed to completely document a single scan project. A project will typically include multiple scans over a definable object or coverage area. For example, if two separate monuments/structures are scanned at a site then each monument will have its own project level metadata. Scan level metadata is information collected that pertains to each unique scan within a project. Most of the metadata entries are self explanatory however additional descriptions may be included where deemed necessary.

### 3.2.1 Project Level Metadata

```{list-table} 
:header-rows: 1

* - Element
  - Description
* - Project Name
  - Name of the project
* - Name of monument, survey area, or object
  - Name of object, monument, or area scanned
* - Monument/Object Number
  - The ID number or code, if applicable, of the object or monument
* - Monument/Object Description
  - Brief description of the monument/object being scanned
* - Survey Location
  - Exact location of survey with complete address and/or coordinates
* - Survey Date(s)
  - Dates(s) of survey
* - Survey Conditions
  - The overall weather trend during survey (sunny, overcast, indoors, etc.)
* - Scanner Details
  - Details of the instrument(s) with serial number(s) and scan units
* - Company/Operator Name
  - Details of company and scan operator name
* - Control data collected?
  - If yes, then list *control_file_name.txt*.
* - Turntable used?
  - Yes/No
* - RGB data capture?
  - If yes, then specify whether:<br/>- Internal or external?<br/>- Was an additional lighting system used?<br/>If yes, then provide a brief description of the lighting system.
* - Estimated Data Resolution
  - The estimated data resolution across the monument or object.
* - Total Number of Scans in Project
  - Total number of scans
* - Description of final datasets for archive
  - What datasets will be archived (include file names if possible)
* - Planimetric map of scan coverage areas
  - If applicable, then provide the image name.
* - Additional project notes
  - Additional notes
* - Images from survey
  - Optional, if yes, then provide the image file names
```

### 3.2.2 Scan Level Metadata

```{list-table} 
:header-rows: 1
:name:
* - Element
  - Description
* - Scan Filename
  - The name of the scan. A suggested filename for original raw scans for archiving is in this format: *ProjectName_scan1.txt*.
* - Scan Transformation Matrix
  - The name of the transformation matrix used in Global Registration.  Suggested file name: *ProjectName_scan1_mtrx.txt
* - Matrix Applied to Scan?
  - Y/N Has the matrix been applied to the archived scan?
* - Name of monument/object
  - Name of monument or object being scanned 
* - Survey Date
  - Date of scan
* - Data Resolution
  - Fixed resolution or data resolution at specific range.
* - Number of Points in Scan
  - Total number of points in the scan file
* - Additional Scan Notes
  - Additional notes
* - Scanner Technology
  - TOF/Phase/Triangulation
* - First or Last Return (TOF scans only)
  - Indicated whether first, last, or both returns were specified
* - Camera Exposure Settings (If RGB acquired)(TOF and Phase scans)
  - Exposure settings set on scanner
* - Frequency Settings (Phase scans only)
  - Frequency settings set on scanner
* - Noise Settings (Phase scans only)
  - Noise settings set on scanner
* - Lense or FOV Details (Triangulation scans only)
  - Indicate which lense or FOV was used during scan	
```

## 3.3 Scan Registration Metadata  

The registered dataset is a single point cloud file that is comprised of multiple scans that have been registered to the same coordinate system with a completed global registration. The registered point cloud dataset should be archived as a single point cloud file in the ASCII format (TXT) and should also include the transformation matrices for the original scans as TXT files. An additional control point file may also be available (TXT).               

```{list-table} Scan Registration Metadata
:header-rows: 1

* - Element
  - Description
* - Name of Registered Dataset
  - Filename for the dataset, a suggested naming structure for registered dataset for archiving: *ProjectName_GR.txt*
* - Registration Method
  - Provide a brief description of the methods used to register the point cloud.  E.G. Individual scans were aligned using N Point pairs. Final global registration computed following individual scan alignment. 
* - Global Registration Error in units
  - Total RMS error from global registration in scan units
* - Total number of points in file
  - Total number of points in final registered point cloud
```

Suggested File Name for transformation matrices: *ProjectName_GRmatrices_scan1.txt*

## 3.4 Metadata for additional products

### 3.4.1 Pre Mesh Point Cloud Subset Metadata (optional)

The premesh point cloud dataset is only archived for projects where polygonal meshes are created. The premesh point cloud dataset has had additional processing and clean up to prepare the point cloud for meshing. This dataset is considered important because it is the base dataset to which all meshes and additional mesh products should be compared to for final accuracy assessment.

```{list-table} Pre-Meshing Metadata
:header-rows: 1

* - Element
  - Description
* - Name of Pre-Mesh Dataset
  - The dataset's filename, a suggested naming convention for premesh point cloud dataset is *ProjectName_GRE.txt*
* - Number of Points in File
  - Total number of points in the edited premesh point cloud
* - Overlap Reduction
  - (Y/N) (optional)
* - Smoothing
  - (Y/N) (optional)
* - Subsampling
  - (Y/N) (optional)
* - Color Editions
  - (Y/N) (optional)
* - Point Editing Summary
  - Include a description of major editing operations (IE overlap reduction, point deletion, etc...) that have been performed on the dataset
```

### 3.4.2 Metadata for a polygonal mesh (include creation, editing, and optimization)

A polygonal mesh is a surface model of a dataset that is created by connecting points through a series of small triangles. Creating, editing, and finalizing a polygonal mesh is a very complex process. The final mesh model should be archived in the OBJ format with the metadata items listed below. If color is included in the dataset it can either be stored internally within the OBJ data structure or as a separate JPG (and archived accordingly). Additionally, if the object’s coordinate system is adjusted then a transformation matrix must also accompany the OBJ file. 

```{list-table} Polygonal Mesh Metadata
:header-rows: 1

* - Element
  - Description
* - Name of Mesh Dataset
  - The filename, a suggested naming convention for the polygonal mesh dataset is **ProjectName_origmesh*
* - Holes Filled
  - (Y/N)
* - Smoothing
  - (Y/N)
* - Color Editions
  - (Y/N) (optional)
* - Healing/despiking
  - (Y/N) (optional)
* - Total Triangle Count (post editing, predecimation)
  -  Total number of triangles in the mesh file
* - RGB Color Included
  - (Y/N)
* - Data Reduction
  - (Y/N). If yes, give percentage of reduction from original
* - Coordinate System Adjustment
  - (Y/N). If yes, a transformation matrix must also be provided.
* - Additional processing notes
  -  
```

```{list-table} Decimated Polygonal Mesh Metadata
:header-rows: 1

* - Element
  - Description
* - Name of Decimated Mesh Dataset
  - The file name, a suggested naming convention for the decimated polygonal mesh dataset is *ProjectName_decimesh_50pcnt* for decimated mesh e.g. by 50%.
* - Total Original Triangle Count
  - 
* - Decimated Triangle Count
  - 
* - RGB Color Preserved from original dataset
  - (Y/N)
```

### 3.4.3 Metadata for creating 2D CAD Models

2D CAD Models can include cross sections, plans and elevations and be derived from point clouds or meshed datasets. It is recommended that all 2D CAD drawings be archived in the DXF or DWG formats. Further metadata should also be collected in line with the CAD Guide.

```{list-table} 2D CAD Model Metadata
:header-rows: 1
:name:
* - Element
  - Description
* - Source file name w/extension used to create 2D CAD Model
  - 
* - Coordinate System transformation?
  - (Y/N). If yes, provide transformation matrix
* - Software used
  - 
* - Dataset type
  - Cross Section, Plan, Elevation
```

If *cross section* dataset then:

```{list-table}
:header-rows: 1

* - Element
  - Description
* - Direction of cross sections
  - (X Axis, Y Axis, Z Axis, Other - Provide coordinates of direction)
* - Number of cross sections
  - 
```

If *elevation or plan* dataset then:

```{list-table}
:header-rows: 1

* - Element
  - Description
* - Method used
  - Briefly describe method for creating 2D line features
```

### 3.4.4 Metadata for creating a 3D CAD Model

A 3D CAD model is a 3D surface model that has been created from a point cloud dataset. 3D CAD Models should be archived in DXF or DWG format. Further metadata should also be collected in line with the CAD Guide.

```{list-table} 3D CAD Drawing Metadata
:header-rows: 1

* - Element
  - Description
* - Source file name w/extension used to create 3D CAD Model
  - 
* - Coordinate System transformation?
  - (Y/N). If yes, provide transformation matrix
* - Software used to create 3D CAD Model
  - 
* - Brief explanation of methods used to create 3D CAD model
  - 
```

### 3.4.5 Metadata for creating a Digital Elevation Model (DEM)

DEM's can be created in GIS software from imported point cloud datasets. It is recommended that DEMs be archived in USGS, SDTS or other available ArcView formats.

```{list-table} DEM Creation Metadata
:header-rows: 1

* - Element
  - Description
* - Source point cloud dataset name used to create DEM
  - 
* - DEM grid size (rows and columns)
  - 
* - DEM resolution; units
  - 
* - Coordinate System transformation (Y/N)?
  - If yes, provide transformation matrix
* - Brief explanation of methods used to create DEM
  - 
```

### 3.4.6 Metadata for creating video/animation

A video or flythrough of a point cloud dataset or any of the derived products can be useful in many applications. All videos should be archived in the MPG4 format.

```{list-table} Video Creation Metadata
:header-rows: 1

* - Element
  - Description
* - Source file name w/extension used to create video
  - 
* - Software used to create video
  - 
* - Codec used for compression
  - 
* - FPS
  - 
```

## 3.5 Disseminating and Viewing Scan Data and associated products

### 3.5.1 Free Data Viewers for Point Cloud Datasets

Point cloud data sets, particularly those produced by large terrestrial surveys, can be very large often containing millions of points. Point clouds are a unique data type that are not yet widely supported in typical 3D modeling or CAD packages. Instead, software packages used to edit and process point cloud datasets typically make free data viewers available that are used for viewing and manipulating point clouds. These packages vary widely in the types of point cloud data sets that are supported, many packages only support proprietary formats, and the advanced functionality beyond basic point cloud viewing and manipulation. Below is a list of common free point cloud viewers followed by a quick comparison chart. For complete software specifications, please visit the appropriate website.  

__Polyworks IMView__

IMView is the free viewer provided by Polyworks and is optimized for viewing projects generated from the IMInspect module available in the commercial version of the Polyworks software. Users can export and distribute IMInspect projects which can include point cloud, mesh, or CAD datasets which can then be viewed in IMView. In IMView, users can calculate basic measurements including distance, radii, angles, and cross-sections and can also generate inspection reports in PDF, Word, Excel or HTML formats. IMView also imports standalone mesh files including OBJ, WRL, PLY and others however all measurement functionality is removed and the software only acts as a free viewer with basic 3D viewing capabilities. 

__Rapidform Explorer__

Rapidform Explorer is a free data viewer that supports 3D viewing and measurement capabilities for numerous point cloud, mesh, and CAD formats. In addition to basic 3D viewing and measurements, Explorer also offers area and volume calculations for mesh and CAD models. Rapidform Explorer offers support for a wide variety of formats including standard formats such as ASCII, OBJ, and DXF and numerous scanner proprietary formats. It also offers standard reporting options as well as the ability to publish 3D scan models embedded in HTML pages. 

__Geomagic Review__

Geomagic Review offers the ability for users to view inspection results created by Geomagic Qualify. Users can measure distances, annotate, create reports, and modify data sets. Geomagic Qualify only opens Geomagic WRP files.

__Cyclone TruView and Cyclone Viewer__

Leica Cyclone offers two free point cloud viewing options. TruView is a web-based point cloud viewer that allows users to view and measure point cloud datasets online. The user is typically provided with a “site map” that has hyperlinks to individual scan locations. Once a location is clicked on, the user jumps to that location where they can rotate, zoom, measure features, and annotate within the view. The view is constrained to the perspective of the scanner and is not considered to be full 3D viewing where the dataset can be observed from multiple directions. In addition, the user can “jump” between scanner locations that overlap within a viewing area. TruView offers a simplified means for viewing point cloud datasets that requires no previous 3D experience. To view a truview file, the end user must download the Internet Explorer TruView plugin from the Leica website. A truview file is created simply by publishing one’s project from Leica Cyclone using Cyclone Publisher.

```{figure} ../images/ls-eleusis1_sitemap.jpg
:alt: Figure 12.

__Figure 12:__ Example of a site map of scan data from Eleusis, Greece 
```

```{figure} ../images/ls-eleusis2_truview.jpg
:alt: Figure 13.

__Figure 13:__ The TruView environment where the user can measure features and annotate directly onscreen (Scan data from Eleusis, Greece)
```

Cyclone Viewer is the unlicensed data viewer for Cyclone. It simply allows the user to view and manipulate point cloud datasets that have been imported and saved in the proprietary Cyclone IMP format. Cyclone Viewer Pro with measurement capabilities is available for additional cost from Leica. 

__Pointools Viewer__

Pointools Viewer is the unlicensed version of Pointools Viewer Pro. Pointools can import standard data formats for point clouds, meshes, and CAD files including ASCII, 3DS, OBJ, DXF, and DWG. It provides basic distance measuring tools for all data types. 

__Meshlab__

Meshlab is an open source software for processing and editing point cloud and mesh datasets. Some functions in Meshlab include mesh creation, editing, cleaning, healing, inspection, and more. Meshlab can import numerous point cloud and mesh data formats and works well as a data viewer. Basic distance measurement tools are also available. 

```{list-table} Basic Viewer Comparison
:header-rows: 1

* - Free Viewer
  - ASCII Data Import
  - Supported Formats
  - Advanced Measurement Capabilities
* - Polyworks IMView
  - No
  - PWZIP, Numerous mesh formats
  - Yes (only on PWZIP)
* - Rapidform Explorer
  - Yes
  - Numerous point cloud (some scanner proprietary formats), mesh, and CAD formats
  - Yes
* - Geomagic Review
  - No
  - WRP
  - Yes
* - Cyclone TruView (Web-based)
  - No
  - HTML file
  - Yes – distance only
* - Cyclone Viewer
  - No
  - IMP
  - No
* - Pointools Viewer
  - Yes
  - Numerous point cloud, mesh, and CAD formats
  - Yes - distance only
* - MeshLab
  - Yes
  - Numerous mesh formats, some scanner proprietary formats
  - Yes – distance only
```

The list of free point cloud viewers reviewed here are some of the most common ones used by industry professionals. Most of the viewers listed above are optimized to work with data types generated by their commercial counterparts. However, Rapidform Explorer offers the same functionality for all data formats and can import variety of file types.  Rapidform, Pointools, and Meshlab are probably the more robust of the free viewers given their ability to import numerous data types and perform basic measurements. These three viewers can also directly import ASCII data which is important for viewing point cloud datasets that have been archived in the ASCII format. 

### 3.5.2 Free Data Viewers for Polygonal Mesh Datasets

As noted above in the point cloud section, Rapidform Explorer, Pointools, and Meshlab are all free data viewers that can all import most common mesh formats including OBJ, WRL (VRML), and 3DS. These software also provide basic measurement capabilities on objects. Polygonal meshes can be imported into most 3D modeling software including 3DStudio Max, SoftImage, Cinema 4D, Maya, and others. See the image below that has a scanned pottery vessel from the Hampson collection inserted into a 3D scene.

```{figure} ../images/ls-nodena_village_with_pot.jpg
:alt: Figure 14

__Figure 14:__ 3D rendering of a Native American village scene showing a scanned vessel from the Hampson Collection.
```

These packages however are typically not meant to view mesh models that have been converted from point clouds that may have high triangle counts. Typically a mesh model will need to be decimated to easily be viewable in a commercial modeling software. 

One of the most common free 3D modeling packages available is Blender. Blender is an open source software that was released to the public in 2002.  Common tasks included in Blender include 3D modeling, animation, texturing, character rigging, smoke/water simulations, rendering, and compositing.  Blender can import OBJ, WRL, 3DS, files and more.